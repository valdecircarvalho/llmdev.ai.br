{{ define "main" }}
  <article class="main">
    {{- with .Title }}
      <header>
        <h1 class="!mb-1">{{ . }}</h1>
      </header>
    {{ end -}}
    {{- with .Content }}
      {{ . }}
    {{ end -}}
  </article>

  {{- $pages := where site.RegularPages "Section" "in" (slice "posts" "notes") -}}
  {{- $sorted := sort $pages "Date" "desc" -}}
  {{- $limit := int (default 8 site.Params.home.recentContentLimit) -}}
  {{- with first $limit $sorted }}
    <section>
      <h2>Conteudos Recentes</h2>

      <div class="not-prose">
        <ol class="flex flex-col space-y-4">
          {{- range . }}
            {{- $dateMachine := .Date | time.Format "2006-01-02T15:04:05-07:00" -}}
            {{- $dateHuman := .Date | time.Format (default ":date_long" .Site.Params.dateFormat) -}}
            <li>
              <article class="flex flex-row items-center space-x-3">
                <span class="shrink-0 opacity-70" aria-hidden="true">
                  {{- if eq .Section "posts" -}}
                    {{ partial "svg/newspaper" }}
                  {{- else -}}
                    {{ partial "svg/notebook-text" }}
                  {{- end -}}
                </span>
                <div class="flex grow flex-col">
                  <a
                    href="{{ .RelPermalink }}"
                    class="underline decoration-slate-300 decoration-2 underline-offset-4 hover:decoration-inherit"
                    >{{ .Title }}</a
                  >
                  <div class="text-sm italic opacity-80">
                    <time datetime="{{ $dateMachine }}">{{ $dateHuman }}</time>
                    <span class="ml-2 not-italic">Â· {{ if eq .Section "posts" }}Post{{ else }}Nota{{ end }}</span>
                  </div>
                </div>
              </article>
            </li>
          {{- end }}
        </ol>
      </div>
    </section>
  {{- end }}
{{ end }}
